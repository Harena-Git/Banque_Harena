╔══════════════════════════════════════════════════════════════════════════════╗
║                    DÉPLOIEMENT RAPIDE - BANK APPLICATION                     ║
╚══════════════════════════════════════════════════════════════════════════════╝

┌──────────────────────────────────────────────────────────────────────────────┐
│ ÉTAPE 1 : TÉLÉCHARGER LE DRIVER POSTGRESQL                                  │
└──────────────────────────────────────────────────────────────────────────────┘

  1. Aller sur : https://jdbc.postgresql.org/download/
  2. Télécharger : postgresql-42.7.3.jar
  3. Sauvegarder dans : C:\temp\postgresql-42.7.3.jar

┌──────────────────────────────────────────────────────────────────────────────┐
│ ÉTAPE 2 : CRÉER LA BASE DE DONNÉES                                          │
└──────────────────────────────────────────────────────────────────────────────┘

  Ouvrir psql ou pgAdmin et exécuter :

    CREATE DATABASE "s5-bank" WITH ENCODING 'UTF8';

┌──────────────────────────────────────────────────────────────────────────────┐
│ ÉTAPE 3 : DÉMARRER WILDFLY                                                  │
└──────────────────────────────────────────────────────────────────────────────┘

  Terminal 1 :

    cd C:\wildfly\bin
    standalone.bat

  ⚠️  LAISSER CETTE FENÊTRE OUVERTE

┌──────────────────────────────────────────────────────────────────────────────┐
│ ÉTAPE 4 : CONFIGURER setup-wildfly.bat                                      │
└──────────────────────────────────────────────────────────────────────────────┘

  Ouvrir : wildfly-scripts\setup-wildfly.bat
  
  Modifier ces lignes :

    set WILDFLY_HOME=C:\wildfly
    set POSTGRES_JAR=C:\temp\postgresql-42.7.3.jar
    set DB_USER=postgres
    set DB_PASSWORD=postgres

  Sauvegarder le fichier.

┌──────────────────────────────────────────────────────────────────────────────┐
│ ÉTAPE 5 : EXÉCUTER LE SCRIPT                                                │
└──────────────────────────────────────────────────────────────────────────────┘

  Terminal 2 (NOUVEAU terminal) :

    cd D:\Cours\Architecture_Mr_Tahina\Bank\Banque_Harena
    wildfly-scripts\setup-wildfly.bat

  Le script va automatiquement :
    ✓ Configurer le driver PostgreSQL
    ✓ Configurer le DataSource BankDS
    ✓ Tester la connexion
    ✓ Compiler le projet (mvn clean install)
    ✓ Déployer Bank.ear

┌──────────────────────────────────────────────────────────────────────────────┐
│ ÉTAPE 6 : ACCÉDER À L'APPLICATION                                           │
└──────────────────────────────────────────────────────────────────────────────┘

  Ouvrir le navigateur :

    http://localhost:8080/centralizer

╔══════════════════════════════════════════════════════════════════════════════╗
║                              DÉPANNAGE RAPIDE                                ║
╚══════════════════════════════════════════════════════════════════════════════╝

  ❌ "WildFly non trouvé"
     → Vérifier WILDFLY_HOME dans setup-wildfly.bat

  ❌ "Driver PostgreSQL non trouvé"
     → Télécharger le JAR et vérifier POSTGRES_JAR

  ❌ "Connexion à la base échouée"
     → Vérifier que PostgreSQL est démarré
     → Vérifier que la base 's5-bank' existe
     → Vérifier DB_USER et DB_PASSWORD

  ❌ "Compilation échouée"
     → Vérifier que Maven est installé : mvn -version
     → Vérifier que Java est installé : java -version

╔══════════════════════════════════════════════════════════════════════════════╗
║                          COMMANDES UTILES                                    ║
╚══════════════════════════════════════════════════════════════════════════════╝

  Recompiler et redéployer :
    mvn clean install
    copy Bank-ear\target\Bank.ear C:\wildfly\standalone\deployments\

  Voir les logs WildFly :
    type C:\wildfly\standalone\log\server.log

  Tester la connexion DB :
    jboss-cli.bat --connect
    /subsystem=datasources/data-source=BankDS:test-connection-in-pool

╔══════════════════════════════════════════════════════════════════════════════╗
║                          DOCUMENTATION COMPLÈTE                              ║
╚══════════════════════════════════════════════════════════════════════════════╝

  📋 Checklist détaillée : DEPLOYMENT-CHECKLIST.md
  📖 Guide complet : WILDFLY-SETUP-GUIDE.md
  🔧 Scripts : wildfly-scripts/README.md

╔══════════════════════════════════════════════════════════════════════════════╗
║                         CONFIGURATION ACTUELLE                               ║
╚══════════════════════════════════════════════════════════════════════════════╝

  JNDI DataSource : java:/BankDS
  Base de données : s5-bank
  Port PostgreSQL : 5432
  Port WildFly    : 8080
  URL Application : http://localhost:8080/centralizer

╔══════════════════════════════════════════════════════════════════════════════╗
║                           BON DÉPLOIEMENT ! 🚀                               ║
╚══════════════════════════════════════════════════════════════════════════════╝
